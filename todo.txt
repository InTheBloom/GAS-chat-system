とりあえずいまやるべきこと

- 他のページからも参照するスクリプトを分離して、全ページ共通で走らせるinit()を用意する。
- last updatedをもっと賢く用意する。localStorageに保存するオブジェクトをもう少し体系的な感じにする。


initでやりたいこと
- localStorageを利用できるユーザかどうかのチェック -> もしダメならmainを走らせない。

関数をいい感じに分離したりした。
あとはGAS側でいちいちユーザ認証をするようにしたい。

ちょっとテストで書き込んでみて、ファイルサイズ制限が以外にも厳しいことを知った。
-> スレッド別にファイルを分ける実装をしたい。そのために、ハブページに対応するファイルとスレッドで分ける。
スレッド作成クエリが来たらファイルを新しく生成して、そのファイルidをハブページで持つ実装にする。
-> でけた。天才です。すみません。

今の所5分に一回データの自動更新をかけているわけだけど、もう少し賢く更新できるかもしれない。
例えばデータが必要になったときに5分以上経っていたら初めて要求するとか。これは「必要になったとき」の定義がシンドイ感じがするので見送るかもしれない。
